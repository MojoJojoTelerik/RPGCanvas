<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>RPG Canvas</title>
    <!-- css -->
    <link href="css/general.css" rel="stylesheet" />
    <!-- js libraries -->
    <script src="js/libs/jquery-2.1.1.js"></script>
    <script src="js/libs/kinetic-v5.1.0.js"></script>
    <script src="js/libs/raphael.js"></script>
    <!-- custom raphael js --> 
    <script src="js/gameStats.js"></script>
    <!-- custom kinetic js --> 
    <script src="js/canvas/Game.js"></script>
    <script src="js/canvas/Shot.js"></script>
    <script src="js/canvas/EnemyFactory.js"></script>
    <script src="js/canvas/ShotFactory.js"></script>
    <script src="js/canvas/Player.js"></script>
    <script src="js/canvas/Enemy.js"></script>
    <script src="js/canvas/Stage.js"></script>
    <script src="js/canvas/events.js"></script>
    <script src="js/canvas/defineObstacles.js"></script>
    <script src="js/canvas/collisions.js"></script>
</head>
<body>
    <div id="container">
        <div id="canvas"></div>

        <audio loop>
            <source src="./etc/DST-3rdBallad.mp3" type="audio/mpeg" />
            <source src="./etc/DST-3rdBallad.ogg" type="audio/ogg" />
            <!--[if IE]>
            <embed src="./etc/DST-3rdBallad.mp3" loop="1" />
            <![endif]-->
        </audio>

        <aside id="right">
            <h2>Adjustments</h2>
            <label id="slider-label" for="slider">Brightness: </label>
            <input id="slider" type="range" min="-0.1" max="0.1" step="0.01" value="0">

            <p style="clear:both"></p>

            <label id="slider-label" for="slider-volume">Volume: </label>
            <input id="slider-volume" type="range" min="0" max="1" step="0.01" value="0.5">

            <p style="clear:both"></p>

            <h2 id="game-stats-heading">Game Stats</h2>

            <div id="gameStatsDiv"></div>
        </aside>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var sources = {
                frame: 'frame.png',
                map: 'map.png',
                rock: 'rock.png',
                greenTree: 'green_tree.png',
                brownTree: 'brown_tree.png',
                pinkTree: 'pink_tree.png',
                bush: 'bush.png',
                player: 'sprites/laila.png',
                enemy: 'enemy.png',
                shot: 'shot.png'
            };

            function loadImages(sources) {
                var assetDir = './img/';
                var images = {};
                var loadedImages = 0;
                var numberOfImages = Object.keys(sources).length;

                for (var key in sources) {
                    images[key] = new Image();
                    images[key].onload = function () {
                        if (++loadedImages >= numberOfImages) {
                            new Game(images);
                        }
                    };
                    images[key].src = assetDir + sources[key];
                }
            }

            loadImages(sources);
        }, false);
    </script>
</body>
</html>
